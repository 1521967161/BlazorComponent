{"version":3,"sources":["node_modules/browser-pack/_prelude.js","main.ts","src/interop.ts","src/modules/Caret.ts","src/modules/dragHelper.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","interop","window","BlazorComponent","getDom","element","document","documentElement","querySelector","body","getDomInfo","selector","arguments","undefined","result","dom","style","cloned","cloneNode","appendChild","getDomInfoObj","removeChild","console","log","offsetWidth","offsetTop","offsetLeft","scrollHeight","scrollWidth","scrollLeft","scrollTop","clientTop","clientLeft","clientHeight","clientWidth","position","res","Object","box","x","y","getBoundingClientRect","viewportElement","width","offsetHeight","height","relativeLeft","left","relativeTop","top","absoluteLeft","absoluteTop","getElementPos","Math","round","fileClickEvent","fileId","this","attributes","nodeValue","getElementById","click","getObjectURL","file","url","URL","createObjectURL","webkitURL","addDomEventListener","eventName","preventDefault","invoker","callback","args","k","obj","json","JSON","stringify","v","Node","Window","invokeMethodAsync","addEventListener","debounce","innerWidth","innerHeight","htmlElement","addFileClickEventListener","btn","removeFileClickEventListener","removeEventListener","clearFile","setAttribute","value","getFileInfo","files","fileInfo","objectUrl","push","fileName","name","size","objectURL","type","uploadFile","index","data","headers","instance","percentMethod","successMethod","errorMethod","formData","FormData","append","key","req","XMLHttpRequest","onreadystatechange","readyState","status","responseText","upload","onprogress","event","percent","floor","loaded","onerror","open","header","setRequestHeader","send","triggerEvent","eventType","stopPropagation","evt","createEvent","initEvent","dispatchEvent","setProperty","getFirstChildBoundingClientRect","firstElementChild","htmlElementEventListennerConfigs","Array","slideTo","targetPageY","timer","setInterval","currentY","speed","ceil","clearInterval","scrollTo","getActiveElement","activeElement","getAttribute","func","wait","immediate","timeout","_this","_arguments","context","callNow","clearTimeout","setTimeout","apply","css","hasOwnProperty","addCls","clsName","classList","add","_element$classList","_toConsumableArray","removeCls","remove","_element$classList2","addHtmlElementEventListener","selectors","options","config","listenner","target","attr","removeHtmlElementEventListener","matchMedia","query","matches","copy","text","navigator","clipboard","writeText","then","err","error","textArea","createElement","focus","select","msg","execCommand","fallbackCopyTextToClipboard","noScroll","HTMLElement","preventScroll","hasFocus","blur","backTop","scrollIntoView","behavior","block","inline","scrollToElement","container","scrollToPosition","getFirstChildDomInfo","addClsToFirstChild","className","removeClsFromFirstChild","addDomEventListenerToFirstChild","getAbsoluteTop","offset","offsetParent","getAbsoluteLeft","addElementToBody","delElementFromBody","addElementTo","addElement","elementSelector","parent","delElementFrom","delElement","focusDialog","count","ele","hasAttribute","getWindow","isTop","scrollY","isBottom","elementScrollIntoView","oldBodyCacheStack","getTextAreaInfo","currentStyle","parseFloat","getComputedStyle","defaultView","getPropertyValue","is","NaN","disableBodyScroll","overflow","oldBodyCache","forEach","enableBodyScroll","pop","_a","_b","_c","destroyAllDialog","querySelectorAll","parentNode","createIconFromfontCN","scriptUrl","script","getScroll","pageXOffset","pageYOffset","getInnerText","innerText","getMaxZIndex","concat","all","reduce","max","zIndex","getStyle","styleProp","funcDict","disposeResizeTextArea","id","objReferenceDict","resizeTextArea","minRows","maxRows","dims","rowHeight","oldHeight","rows","trunc","newHeight","overflowY","registerResizeTextArea","objReference","disposeObj","objReferenceName","Caret_1","mentionsOnWindowClick","mentionsObj","getCursorXY","default","dragHelper_1","defineProperty","enumerable","get","disableDraggable","enableDraggable","resetModalPosition","bindTableHeaderAndBodyScroll","bodyRef","headerRef","bindScrollLeftToHeader","unbindTableHeaderAndBodyScroll","addPreventKeys","inputElement","keys","map","toUpperCase","indexOf","preventKeys","removePreventKeys","addPreventEnterOnOverlayVisible","overlayElement","check","preventKeyOnCondition","removePreventEnterOnOverlayVisible","insertAdjacentHTML","head","getImageDimensions","src","Promise","resolve","reject","img","Image","onload","hasError","preventDefaultOnArrowUpDown","observer","ResizeObserver","entries","dimensions","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","dimension","contentRect","return","observe","getBoundingClientRects","elements","rect","getSize","sizeProp","display","Blazor","registerCustomEventType","browserEventName","createEventArgs","isMobile","test","userAgent","substr","InputCaret","inputor","_classCallCheck","getPos","domInputor","selectionStart","getPosition","pos","format","replace","inputorValue","start_range","slice","end_range","html","Mirror","create","getOffset","$mirror","AntDesign","mirrorCss","innerHTML","parentElement","css_attr","flag","oRect","elem","throttle","fn","threshold","start","Date","_len","_key","curTime","eventMap","Map","defaultOptions","inViewport","Dragger","_container","triggler","_triggler","_options","onMousedown","onMouseup","onMousemove","onResize","_style","_isFirst","dragInViewport","_this2","_state","state","isInDrag","mX","clientX","mY","clientY","_getContainerPos","getContainerPos","domMaxY","domMaxX","domStartX","domStartY","_getContainerPos2","newDomX","nowX","nowY","disX","disY","newDomY","margin","paddingBottom","bind","parseInt","assign","dragger","set","bindDrag","unbindDrag","resetContainerStyle"],"mappings":"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","file":"blazor-component.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","﻿import * as interop from \"./src/interop\";\r\n\r\ndeclare global {\r\n    interface Window {\r\n        BlazorComponent: any;\r\n    }\r\n}\r\n\r\nwindow.BlazorComponent = {\r\n    interop,\r\n};\r\n","﻿export function getDom(element) {\r\n    if (!element) {\r\n        element = document.body;\r\n    } else if (typeof element === 'string') {\r\n        if (element === 'document') {\r\n            return document.documentElement;\r\n        }\r\n        element = document.querySelector(element);\r\n    }\r\n    return element;\r\n}\r\n\r\nexport function getDomInfo(element, selector = \"body\") {\r\n    var result = {};\r\n\r\n    var dom = getDom(element);\r\n\r\n    if (dom.style && dom.style['display'] === 'none') {\r\n        // clone and set display not none becuase\r\n        // element with display:none can not get the dom info\r\n        var cloned = dom.cloneNode(true);\r\n        cloned.style['display'] = 'inline-block';\r\n        cloned.style['z-index'] = -1000;\r\n        document.querySelector(selector).appendChild(cloned);\r\n\r\n        result = getDomInfoObj(cloned);\r\n\r\n        document.querySelector(selector).removeChild(cloned);\r\n    }\r\n    else {\r\n        console.log(\"dom.offsetWidth\", dom.offsetWidth)\r\n        result = getDomInfoObj(dom);\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction getDomInfoObj(dom) {\r\n    var result = {};\r\n    result[\"offsetTop\"] = dom.offsetTop || 0;\r\n    result[\"offsetLeft\"] = dom.offsetLeft || 0;\r\n    result[\"scrollHeight\"] = dom.scrollHeight || 0;\r\n    result[\"scrollWidth\"] = dom.scrollWidth || 0;\r\n    result[\"scrollLeft\"] = dom.scrollLeft || 0;\r\n    result[\"scrollTop\"] = dom.scrollTop || 0;\r\n    result[\"clientTop\"] = dom.clientTop || 0;\r\n    result[\"clientLeft\"] = dom.clientLeft || 0;\r\n    result[\"clientHeight\"] = dom.clientHeight || 0;\r\n    result[\"clientWidth\"] = dom.clientWidth || 0;\r\n    var position = getElementPos(dom);\r\n    result[\"offsetWidth\"] = Math.round(position.offsetWidth) || 0;\r\n    result[\"offsetHeight\"] = Math.round(position.offsetHeight) || 0;\r\n    result[\"relativeLeft\"] = Math.round(position.relativeLeft) || 0;\r\n    result[\"relativeTop\"] = Math.round(position.relativeTop) || 0;\r\n    result[\"absoluteLeft\"] = Math.round(position.absoluteLeft) || 0;\r\n    result[\"absoluteTop\"] = Math.round(position.absoluteTop) || 0;\r\n    return result;\r\n}\r\n\r\nfunction getElementPos(element) {\r\n    var res: any = new Object();\r\n    res.x = 0; res.y = 0;\r\n    if (element !== null) {\r\n        if (element.getBoundingClientRect) {\r\n            var viewportElement = document.documentElement;\r\n            var box = element.getBoundingClientRect();\r\n            var scrollLeft = viewportElement.scrollLeft;\r\n            var scrollTop = viewportElement.scrollTop;\r\n\r\n            res.offsetWidth = box.width;\r\n            res.offsetHeight = box.height;\r\n            res.relativeLeft = box.left;\r\n            res.relativeTop = box.top;\r\n            res.absoluteLeft = box.left + scrollLeft;\r\n            res.absoluteTop = box.top + scrollTop;\r\n        }\r\n    }\r\n    return res;\r\n}\r\n\r\nexport function addFileClickEventListener(btn) {\r\n    if ((btn as HTMLElement).addEventListener) {\r\n        (btn as HTMLElement).addEventListener(\"click\", fileClickEvent);\r\n    }\r\n}\r\n\r\nexport function removeFileClickEventListener(btn) {\r\n    (btn as HTMLElement).removeEventListener(\"click\", fileClickEvent);\r\n}\r\n\r\nexport function fileClickEvent() {\r\n    var fileId = this.attributes[\"data-fileid\"].nodeValue;\r\n    var element = document.getElementById(fileId);\r\n    (element as HTMLInputElement).click();\r\n}\r\n\r\nexport function clearFile(element) {\r\n    element.setAttribute(\"type\", \"input\");\r\n    element.value = '';\r\n    element.setAttribute(\"type\", \"file\");\r\n}\r\n\r\nexport function getFileInfo(element) {\r\n    if (element.files && element.files.length > 0) {\r\n        var fileInfo = [];\r\n        for (var i = 0; i < element.files.length; i++) {\r\n            var file = element.files[i];\r\n            var objectUrl = getObjectURL(file);\r\n            fileInfo.push({\r\n                fileName: file.name,\r\n                size: file.size,\r\n                objectURL: objectUrl,\r\n                type: file.type\r\n            });\r\n        }\r\n\r\n        return fileInfo;\r\n    }\r\n}\r\n\r\nexport function getObjectURL(file: File) {\r\n    var url = null;\r\n    if (window.URL != undefined) {\r\n        url = window.URL.createObjectURL(file);\r\n    } else if (window.webkitURL != undefined) {\r\n        url = window.webkitURL.createObjectURL(file);\r\n    }\r\n    return url;\r\n}\r\n\r\nexport function uploadFile(element, index, data, headers, fileId, url, name, instance, percentMethod, successMethod, errorMethod) {\r\n    let formData = new FormData();\r\n    var file = element.files[index];\r\n    var size = file.size;\r\n    formData.append(name, file);\r\n    if (data != null) {\r\n        for (var key in data) {\r\n            formData.append(key, data[key]);\r\n        }\r\n    }\r\n    const req = new XMLHttpRequest()\r\n    req.onreadystatechange = function () {\r\n        if (req.readyState === 4) {\r\n            if (req.status != 200) {\r\n                instance.invokeMethodAsync(errorMethod, fileId, `{\"status\": ${req.status}}`);\r\n                return;\r\n            }\r\n            instance.invokeMethodAsync(successMethod, fileId, req.responseText);\r\n        }\r\n    }\r\n    req.upload.onprogress = function (event) {\r\n        var percent = Math.floor(event.loaded / size * 100);\r\n        instance.invokeMethodAsync(percentMethod, fileId, percent);\r\n    }\r\n    req.onerror = function (e) {\r\n        instance.invokeMethodAsync(errorMethod, fileId, \"error\");\r\n    }\r\n    req.open('post', url, true)\r\n    if (headers != null) {\r\n        for (var header in headers) {\r\n            req.setRequestHeader(header, headers[header]);\r\n        }\r\n    }\r\n    req.send(formData)\r\n}\r\n\r\nexport function triggerEvent(element, eventType, eventName, stopPropagation) {\r\n    var dom = getDom(element);\r\n    var evt = document.createEvent(eventType);\r\n    evt.initEvent(eventName);\r\n\r\n    if (stopPropagation) {\r\n        evt.stopPropagation();\r\n    }\r\n\r\n    return dom.dispatchEvent(evt);\r\n}\r\n\r\nexport function setProperty(element, name, value) {\r\n    var dom = getDom(element);\r\n    dom[name] = value;\r\n}\r\n\r\nexport function getBoundingClientRect(element) {\r\n    let dom = getDom(element);\r\n    if (dom && dom.getBoundingClientRect) {\r\n        return dom.getBoundingClientRect();\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function getFirstChildBoundingClientRect(element, selector = \"body\") {\r\n    let dom = getDom(element);\r\n    if (dom.firstElementChild) {\r\n        if (dom.firstElementChild.style['display'] === 'none') {\r\n            // clone and set display not none becuase\r\n            // element with display:none can not getBoundingClientRect\r\n            var cloned = dom.firstElementChild.cloneNode(true);\r\n            cloned.style['display'] = 'inline-block'\r\n            cloned.style['z-index'] = -1000\r\n            document.querySelector(selector).appendChild(cloned);\r\n            var value = getBoundingClientRect(cloned);\r\n            document.querySelector(selector).removeChild(cloned);\r\n            return value;\r\n        }\r\n        else {\r\n            return getBoundingClientRect(dom.firstElementChild);\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function addDomEventListener(element, eventName, preventDefault, invoker) {\r\n    let callback = args => {\r\n        const obj = {};\r\n        for (let k in args) {\r\n            if (k !== 'originalTarget') { //firefox occasionally raises Permission Denied when this property is being stringified\r\n                obj[k] = args[k];\r\n            }\r\n        }\r\n        let json = JSON.stringify(obj, (k, v) => {\r\n            if (v instanceof Node) return 'Node';\r\n            if (v instanceof Window) return 'Window';\r\n            return v;\r\n        }, ' ');\r\n        invoker.invokeMethodAsync('Invoke', json);\r\n        if (preventDefault === true) {\r\n            args.preventDefault();\r\n        }\r\n    };\r\n    if (element == 'window') {\r\n        if (eventName == 'resize') {\r\n            window.addEventListener(eventName, debounce(() => callback({ innerWidth: window.innerWidth, innerHeight: window.innerHeight }), 200, false));\r\n        } else {\r\n            window.addEventListener(eventName, callback);\r\n        }\r\n    } else {\r\n        let dom = getDom(element);\r\n        var htmlElement = dom as HTMLElement;\r\n        if (eventName == 'scroll') {\r\n            htmlElement.addEventListener(eventName, debounce(() => callback(getDomInfo(dom)), 200, false));\r\n        } else {\r\n            htmlElement.addEventListener(eventName, callback);\r\n        }\r\n    }\r\n}\r\n\r\nvar htmlElementEventListennerConfigs = new Array();\r\n\r\nexport function addHtmlElementEventListener(selectors, type, invoker, options) {\r\n    let htmlElement: HTMLElement = document.querySelector(selectors);\r\n    var key=selectors + type;\r\n\r\n    //save for remove\r\n    var config = {};\r\n    config[\"listenner\"] = function (args) {\r\n        const obj = {};\r\n\r\n        for (var k in args) {\r\n            if (typeof args[k] == 'string' || typeof args[k] == 'number') {\r\n                obj[k] = args[k];\r\n            }\r\n            else if (k == 'target') {\r\n                var target = {\r\n                    attributes: {\r\n                    }\r\n                };\r\n\r\n                for (let index = 0; index < args.target.attributes.length; index++) {\r\n                    const attr = args.target.attributes[index];\r\n                    target.attributes[attr.name] = attr.value;\r\n                }\r\n                obj[k] = target;\r\n            }\r\n        }\r\n\r\n        invoker.invokeMethodAsync('Invoke', obj);\r\n    };\r\n    config['options'] = options;\r\n\r\n    htmlElementEventListennerConfigs[key] = config;\r\n\r\n    htmlElement.addEventListener(type, config[\"listenner\"], options);\r\n}\r\n\r\nexport function removeHtmlElementEventListener(selectors, type) {\r\n    let htmlElement: HTMLElement = document.querySelector(selectors);\r\n    var key=selectors + type;\r\n\r\n    var config = htmlElementEventListennerConfigs[key];\r\n    htmlElement.removeEventListener(type, config[\"listenner\"], config['options']);\r\n}\r\n\r\nexport function matchMedia(query) {\r\n    return window.matchMedia(query).matches;\r\n}\r\n\r\nfunction fallbackCopyTextToClipboard(text) {\r\n    var textArea = document.createElement(\"textarea\");\r\n    textArea.value = text;\r\n\r\n    // Avoid scrolling to bottom\r\n    textArea.style.top = \"0\";\r\n    textArea.style.left = \"0\";\r\n    textArea.style.position = \"fixed\";\r\n\r\n    document.body.appendChild(textArea);\r\n    textArea.focus();\r\n    textArea.select();\r\n\r\n    try {\r\n        var successful = document.execCommand('copy');\r\n        var msg = successful ? 'successful' : 'unsuccessful';\r\n        console.log('Fallback: Copying text command was ' + msg);\r\n    } catch (err) {\r\n        console.error('Fallback: Oops, unable to copy', err);\r\n    }\r\n\r\n    document.body.removeChild(textArea);\r\n}\r\nexport function copy(text) {\r\n    if (!navigator.clipboard) {\r\n        fallbackCopyTextToClipboard(text);\r\n        return;\r\n    }\r\n    navigator.clipboard.writeText(text).then(function () {\r\n        console.log('Async: Copying to clipboard was successful!');\r\n    }, function (err) {\r\n        console.error('Async: Could not copy text: ', err);\r\n    });\r\n}\r\n\r\nexport function focus(selector, noScroll: boolean = false) {\r\n    let dom = getDom(selector);\r\n    if (!(dom instanceof HTMLElement))\r\n        throw new Error(\"Unable to focus an invalid element.\");\r\n    dom.focus({\r\n        preventScroll: noScroll\r\n    })\r\n}\r\n\r\nexport function hasFocus(selector) {\r\n    let dom = getDom(selector);\r\n    return (document.activeElement === dom);\r\n}\r\n\r\nexport function blur(selector) {\r\n    let dom = getDom(selector);\r\n    dom.blur();\r\n}\r\n\r\nexport function log(text) {\r\n    console.log(text);\r\n}\r\n\r\nexport function backTop(target: string) {\r\n    let dom = getDom(target);\r\n    if (dom) {\r\n        slideTo(dom.scrollTop);\r\n    } else {\r\n        slideTo(0);\r\n    }\r\n}\r\n\r\nfunction slideTo(targetPageY) {\r\n    var timer = setInterval(function () {\r\n        var currentY = document.documentElement.scrollTop || document.body.scrollTop;\r\n        var distance = targetPageY > currentY ? targetPageY - currentY : currentY - targetPageY;\r\n        var speed = Math.ceil(distance / 10);\r\n        if (currentY == targetPageY) {\r\n            clearInterval(timer);\r\n        } else {\r\n            window.scrollTo(0, targetPageY > currentY ? currentY + speed : currentY - speed);\r\n        }\r\n    }, 10);\r\n}\r\n\r\nexport function scrollTo(target) {\r\n    let dom = getDom(target);\r\n    if (dom instanceof HTMLElement) {\r\n        dom.scrollIntoView({\r\n            behavior: \"smooth\",\r\n            block: \"start\",\r\n            inline: \"nearest\"\r\n        });\r\n    }\r\n}\r\n\r\nexport function scrollToElement(container, target) {\r\n    let dom = getDom(container);\r\n    let t: any = getDomInfo(target);\r\n    dom.scrollTop = t.offsetTop - dom.offsetHeight / 2 + t.offsetHeight / 2;\r\n}\r\n\r\nexport function scrollToPosition(container, position) {\r\n    var dom = getDom(container);\r\n    dom.scrollTop = position;\r\n}\r\n\r\nexport function getFirstChildDomInfo(element, selector = \"body\") {\r\n    var dom = getDom(element);\r\n    if (dom.firstElementChild)\r\n        return getDomInfo(dom.firstElementChild, selector);\r\n    return getDomInfo(dom, selector);\r\n}\r\n\r\nexport function addClsToFirstChild(element, className) {\r\n    var dom = getDom(element);\r\n    if (dom.firstElementChild) {\r\n        dom.firstElementChild.classList.add(className);\r\n    }\r\n}\r\n\r\nexport function removeClsFromFirstChild(element, className) {\r\n    var dom = getDom(element);\r\n    if (dom.firstElementChild) {\r\n        dom.firstElementChild.classList.remove(className);\r\n    }\r\n}\r\n\r\nexport function addDomEventListenerToFirstChild(element, eventName, preventDefault, invoker) {\r\n    var dom = getDom(element);\r\n\r\n    if (dom.firstElementChild) {\r\n        addDomEventListener(dom.firstElementChild, eventName, preventDefault, invoker);\r\n    }\r\n}\r\n\r\nexport function getAbsoluteTop(e) {\r\n    var offset = e.offsetTop;\r\n    if (e.offsetParent != null) {\r\n        offset += getAbsoluteTop(e.offsetParent);\r\n    }\r\n    return offset;\r\n}\r\n\r\nexport function getAbsoluteLeft(e) {\r\n    var offset = e.offsetLeft;\r\n    if (e.offsetParent != null) {\r\n        offset += getAbsoluteLeft(e.offsetParent);\r\n    }\r\n    return offset;\r\n}\r\n\r\nexport function addElementToBody(element) {\r\n    document.body.appendChild(element);\r\n}\r\n\r\nexport function delElementFromBody(element) {\r\n    document.body.removeChild(element);\r\n}\r\n\r\nexport function addElementTo(addElement, elementSelector) {\r\n    let parent = getDom(elementSelector);\r\n    if (parent && addElement) {\r\n        parent.appendChild(addElement);\r\n    }\r\n}\r\n\r\nexport function delElementFrom(delElement, elementSelector) {\r\n    let parent = getDom(elementSelector);\r\n    if (parent && delElement) {\r\n        parent.removeChild(delElement);\r\n    }\r\n}\r\n\r\nexport function getActiveElement() {\r\n    let element = document.activeElement;\r\n    let id = element.getAttribute(\"id\") || \"\";\r\n    return id;\r\n}\r\n\r\nexport function focusDialog(selector: string, count: number = 0) {\r\n    let ele = <HTMLElement>document.querySelector(selector);\r\n    if (ele && !ele.hasAttribute(\"disabled\")) {\r\n        setTimeout(() => {\r\n            ele.focus();\r\n            let curId = \"#\" + getActiveElement();\r\n            if (curId !== selector) {\r\n                if (count < 10) {\r\n                    focusDialog(selector, count + 1);\r\n                }\r\n            }\r\n        }, 10);\r\n    }\r\n}\r\n\r\nexport function getWindow() {\r\n    return {\r\n        innerWidth: window.innerWidth,\r\n        innerHeight: window.innerHeight,\r\n        isTop: window.scrollY == 0,\r\n        isBottom: (window.scrollY + window.innerHeight) == document.body.clientHeight\r\n    };\r\n}\r\n\r\nfunction debounce(func, wait, immediate) {\r\n    var timeout;\r\n    return () => {\r\n        const context = this, args = arguments;\r\n        const later = () => {\r\n            timeout = null;\r\n            if (!immediate) func.apply(this, args);\r\n        };\r\n        const callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n        if (callNow) func.apply(context, args);\r\n    };\r\n};\r\n\r\nexport function css(element: HTMLElement, name: string | object, value: string | null = null) {\r\n    if (typeof name === 'string') {\r\n        element.style[name] = value;\r\n    } else {\r\n        for (let key in name) {\r\n            if (name.hasOwnProperty(key)) {\r\n                element.style[key] = name[key];\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function addCls(selector: Element | string, clsName: string | Array<string>) {\r\n    let element = getDom(selector);\r\n\r\n    if (typeof clsName === \"string\") {\r\n        element.classList.add(clsName);\r\n    } else {\r\n        element.classList.add(...clsName);\r\n    }\r\n}\r\n\r\nexport function removeCls(selector: Element | string, clsName: string | Array<string>) {\r\n    let element = getDom(selector);\r\n\r\n    if (typeof clsName === \"string\") {\r\n        element.classList.remove(clsName);\r\n    } else {\r\n        element.classList.remove(...clsName);\r\n    }\r\n}\r\n\r\nexport function elementScrollIntoView(selector: Element | string) {\r\n    let element = getDom(selector);\r\n\r\n    if (!element)\r\n        return;\r\n\r\n    element.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'start' });\r\n}\r\n\r\nconst oldBodyCacheStack = [];\r\n\r\nconst hasScrollbar = () => {\r\n    let overflow = document.body.style.overflow;\r\n    if (overflow && overflow === \"hidden\") return false;\r\n    return document.body.scrollHeight > (window.innerHeight || document.documentElement.clientHeight);\r\n}\r\n\r\nexport function disableBodyScroll() {\r\n    let body = document.body;\r\n    const oldBodyCache = {};\r\n    [\"position\", \"width\", \"overflow\"].forEach((key) => {\r\n        oldBodyCache[key] = body.style[key];\r\n    });\r\n    oldBodyCacheStack.push(oldBodyCache);\r\n    css(body,\r\n        {\r\n            \"position\": \"relative\",\r\n            \"width\": hasScrollbar() ? \"calc(100% - 17px)\" : null,\r\n            \"overflow\": \"hidden\"\r\n        });\r\n    addCls(document.body, \"ant-scrolling-effect\");\r\n}\r\n\r\nexport function enableBodyScroll() {\r\n    let oldBodyCache = oldBodyCacheStack.length > 0 ? oldBodyCacheStack.pop() : {};\r\n\r\n    css(document.body,\r\n        {\r\n            \"position\": oldBodyCache[\"position\"] ?? null,\r\n            \"width\": oldBodyCache[\"width\"] ?? null,\r\n            \"overflow\": oldBodyCache[\"overflow\"] ?? null\r\n        });\r\n    removeCls(document.body, \"ant-scrolling-effect\");\r\n}\r\n\r\nexport function destroyAllDialog() {\r\n    document.querySelectorAll('.ant-modal-root')\r\n        .forEach(e => document.body.removeChild(e.parentNode));\r\n}\r\n\r\nexport function createIconFromfontCN(scriptUrl) {\r\n    if (document.querySelector(`[data-namespace=\"${scriptUrl}\"]`)) {\r\n        return;\r\n    }\r\n    const script = document.createElement('script');\r\n    script.setAttribute('src', scriptUrl);\r\n    script.setAttribute('data-namespace', scriptUrl);\r\n    document.body.appendChild(script);\r\n}\r\n\r\nexport function getScroll() {\r\n    return { x: window.pageXOffset, y: window.pageYOffset };\r\n}\r\n\r\nexport function getInnerText(element) {\r\n    let dom = getDom(element);\r\n    return dom.innerText;\r\n}\r\n\r\nexport function getMaxZIndex() {\r\n    return [...document.all].reduce((r, e) => Math.max(r, +window.getComputedStyle(e).zIndex || 0), 0)\r\n}\r\n\r\nexport function getStyle(element, styleProp) {\r\n    if (element.currentStyle)\r\n        return element.currentStyle[styleProp];\r\n    else if (window.getComputedStyle)\r\n        return document.defaultView.getComputedStyle(element, null).getPropertyValue(styleProp);\r\n}\r\n\r\nexport function getTextAreaInfo(element) {\r\n    var result = {};\r\n    var dom = getDom(element);\r\n    result[\"scrollHeight\"] = dom.scrollHeight || 0;\r\n\r\n    if (element.currentStyle) {\r\n        result[\"lineHeight\"] = parseFloat(element.currentStyle[\"line-height\"]);\r\n        result[\"paddingTop\"] = parseFloat(element.currentStyle[\"padding-top\"]);\r\n        result[\"paddingBottom\"] = parseFloat(element.currentStyle[\"padding-bottom\"]);\r\n        result[\"borderBottom\"] = parseFloat(element.currentStyle[\"border-bottom\"]);\r\n        result[\"borderTop\"] = parseFloat(element.currentStyle[\"border-top\"]);\r\n    }\r\n    else if (window.getComputedStyle) {\r\n        result[\"lineHeight\"] = parseFloat(document.defaultView.getComputedStyle(element, null).getPropertyValue(\"line-height\"));\r\n        result[\"paddingTop\"] = parseFloat(document.defaultView.getComputedStyle(element, null).getPropertyValue(\"padding-top\"));\r\n        result[\"paddingBottom\"] = parseFloat(document.defaultView.getComputedStyle(element, null).getPropertyValue(\"padding-bottom\"));\r\n        result[\"borderBottom\"] = parseFloat(document.defaultView.getComputedStyle(element, null).getPropertyValue(\"border-bottom\"));\r\n        result[\"borderTop\"] = parseFloat(document.defaultView.getComputedStyle(element, null).getPropertyValue(\"border-top\"));\r\n    }\r\n    //Firefox can return this as NaN, so it has to be handled here like that.\r\n    if (Object.is(NaN, result[\"borderTop\"]))\r\n        result[\"borderTop\"] = 1;\r\n    if (Object.is(NaN, result[\"borderBottom\"]))\r\n        result[\"borderBottom\"] = 1;\r\n    return result;\r\n}\r\n\r\nconst funcDict = {};\r\n\r\nexport function registerResizeTextArea(element, minRows, maxRows, objReference) {\r\n    if (!objReference) {\r\n        disposeResizeTextArea(element);\r\n    }\r\n    else {\r\n        objReferenceDict[element.id] = objReference;\r\n        funcDict[element.id + \"input\"] = function () { resizeTextArea(element, minRows, maxRows); }\r\n        element.addEventListener(\"input\", funcDict[element.id + \"input\"]);\r\n        return getTextAreaInfo(element);\r\n    }\r\n}\r\n\r\nexport function disposeResizeTextArea(element) {\r\n    element.removeEventListener(\"input\", funcDict[element.id + \"input\"]);\r\n    objReferenceDict[element.id] = null;\r\n    funcDict[element.id + \"input\"] = null;\r\n\r\n}\r\n\r\nexport function resizeTextArea(element, minRows, maxRows) {\r\n    var dims = getTextAreaInfo(element);\r\n    var rowHeight = dims[\"lineHeight\"];\r\n    var offsetHeight = dims[\"paddingTop\"] + dims[\"paddingBottom\"] + dims[\"borderTop\"] + dims[\"borderBottom\"];\r\n    var oldHeight = parseFloat(element.style.height);\r\n    element.style.height = 'auto';\r\n\r\n    var rows = Math.trunc(element.scrollHeight / rowHeight);\r\n    rows = Math.max(minRows, rows);\r\n\r\n    var newHeight = 0;\r\n    if (rows > maxRows) {\r\n        rows = maxRows;\r\n\r\n        newHeight = (rows * rowHeight + offsetHeight);\r\n        element.style.height = newHeight + \"px\";\r\n        element.style.overflowY = \"visible\";\r\n    }\r\n    else {\r\n        newHeight = rows * rowHeight + offsetHeight;\r\n        element.style.height = newHeight + \"px\";\r\n        element.style.overflowY = \"hidden\";\r\n    }\r\n    if (oldHeight !== newHeight) {\r\n        let textAreaObj = objReferenceDict[element.id];\r\n        textAreaObj.invokeMethodAsync(\"ChangeSizeAsyncJs\", parseFloat(element.scrollWidth), newHeight);\r\n    }\r\n}\r\n\r\n\r\n\r\nconst objReferenceDict = {};\r\nexport function disposeObj(objReferenceName) {\r\n    delete objReferenceDict[objReferenceName];\r\n}\r\n\r\n//#region mentions\r\n\r\nimport getOffset from \"./modules/Caret\";\r\n\r\nexport function getCursorXY(element, objReference) {\r\n    objReferenceDict[\"mentions\"] = objReference;\r\n    window.addEventListener(\"click\", mentionsOnWindowClick);\r\n\r\n    var offset = getOffset(element);\r\n\r\n    return [offset.left, offset.top + offset.height + 14];\r\n}\r\n\r\nfunction mentionsOnWindowClick(e) {\r\n    let mentionsObj = objReferenceDict[\"mentions\"];\r\n    if (mentionsObj) {\r\n        mentionsObj.invokeMethodAsync(\"CloseMentionsDropDown\");\r\n    } else {\r\n        window.removeEventListener(\"click\", mentionsOnWindowClick);\r\n    }\r\n}\r\n\r\n//#endregion\r\n\r\nexport { disableDraggable, enableDraggable, resetModalPosition } from \"./modules/dragHelper\";\r\n\r\nexport function bindTableHeaderAndBodyScroll(bodyRef, headerRef) {\r\n    bodyRef.bindScrollLeftToHeader = () => {\r\n        headerRef.scrollLeft = bodyRef.scrollLeft;\r\n    }\r\n    bodyRef.addEventListener('scroll', bodyRef.bindScrollLeftToHeader);\r\n}\r\n\r\nexport function unbindTableHeaderAndBodyScroll(bodyRef) {\r\n    if (bodyRef) {\r\n        bodyRef.removeEventListener('scroll', bodyRef.bindScrollLeftToHeader);\r\n    }\r\n}\r\n\r\nfunction preventKeys(e, keys: string[]) {\r\n    if (keys.indexOf(e.key.toUpperCase()) !== -1) {\r\n        e.preventDefault();\r\n        return false;\r\n    }\r\n}\r\n\r\nexport function addPreventKeys(inputElement, keys: string[]) {\r\n    if (inputElement) {\r\n        let dom = getDom(inputElement);\r\n        keys = keys.map(function (x) { return x.toUpperCase(); })\r\n        funcDict[inputElement.id + \"keydown\"] = (e) => preventKeys(e, keys);\r\n        (dom as HTMLElement).addEventListener(\"keydown\", funcDict[inputElement.id + \"keydown\"], false);\r\n    }\r\n}\r\n\r\nexport function removePreventKeys(inputElement) {\r\n    if (inputElement) {\r\n        let dom = getDom(inputElement);\r\n        (dom as HTMLElement).removeEventListener(\"keydown\", funcDict[inputElement.id + \"keydown\"]);\r\n        funcDict[inputElement.id + \"keydown\"] = null;\r\n    }\r\n}\r\n\r\nfunction preventKeyOnCondition(e, key: string, check: () => boolean) {\r\n    if (e.key.toUpperCase() === key.toUpperCase() && check()) {\r\n        e.preventDefault();\r\n        return false;\r\n    }\r\n}\r\n\r\nexport function addPreventEnterOnOverlayVisible(element, overlayElement) {\r\n    if (element && overlayElement) {\r\n        let dom = getDom(element);\r\n        funcDict[element.id + \"keydown:Enter\"] = (e) => preventKeyOnCondition(e, \"enter\", () => overlayElement.offsetParent !== null);\r\n        (dom as HTMLElement).addEventListener(\"keydown\", funcDict[element.id + \"keydown:Enter\"], false);\r\n    }\r\n}\r\n\r\nexport function removePreventEnterOnOverlayVisible(element) {\r\n    if (element) {\r\n        let dom = getDom(element);\r\n        (dom as HTMLElement).removeEventListener(\"keydown\", funcDict[element.id + \"keydown:Enter\"]);\r\n        funcDict[element.id + \"keydown:Enter\"] = null;\r\n    }\r\n}\r\n\r\nexport function insertAdjacentHTML(position, text: string) {\r\n    document.head.insertAdjacentHTML(position, text);\r\n}\r\n\r\nexport function getImageDimensions(src: string) {\r\n    return new Promise(function (resolve, reject) {\r\n        var img = new Image()\r\n        img.src = src\r\n        img.onload = function () {\r\n            resolve({\r\n                width: img.width,\r\n                height: img.height,\r\n                hasError: false\r\n            })\r\n        }\r\n        img.onerror = function () {\r\n            resolve({\r\n                width: 0,\r\n                height: 0,\r\n                hasError: true\r\n            })\r\n        }\r\n    })\r\n}\r\n\r\nexport function preventDefaultOnArrowUpDown(element) {\r\n    let dom: Element = getDom(element);\r\n    dom.addEventListener(\"keydown\", function (e: KeyboardEvent) {\r\n        if (e.code == \"ArrowUp\" || e.code == \"ArrowDown\" || e.code == \"Enter\") {\r\n            e.preventDefault();\r\n        }\r\n    })\r\n}\r\n\r\nexport function observer(element, invoker) {\r\n    const resizeObserver = new ResizeObserver((entries => {\r\n        const dimensions = [];\r\n        for (var entry of entries) {\r\n            const dimension = entry.contentRect;\r\n            dimensions.push(dimension);\r\n        }\r\n        invoker.invokeMethodAsync('Invoke', dimensions);\r\n    }));\r\n    resizeObserver.observe(getDom(element));\r\n}\r\n\r\nexport function getBoundingClientRects(selector) {\r\n    var elements = document.querySelectorAll(selector);\r\n\r\n    var result = [];\r\n\r\n    for (var i = 0; i < elements.length; i++) {\r\n        var e: Element = elements[i];\r\n        var dom = {\r\n            id: e.id,\r\n            rect: e.getBoundingClientRect()\r\n        };\r\n        result.push(dom);\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport function getSize(ele: HTMLElement, sizeProp) {\r\n    var display = ele.style.display;\r\n    var overflow = ele.style.overflow;\r\n\r\n    ele.style.display = \"\";\r\n    ele.style.overflow = \"hidden\";\r\n\r\n    var size = ele[\"offset\" + sizeProp] || 0;\r\n\r\n    ele.style.display = display;\r\n    ele.style.overflow = overflow;\r\n\r\n    return size;\r\n}\r\n\r\n//register custom events\r\nwindow.onload = function () {\r\n    registerExmousedown();\r\n}\r\n\r\nfunction registerExmousedown() {\r\n    if (Blazor) {\r\n        Blazor.registerCustomEventType(\"exmousedown\", {\r\n            browserEventName: 'mousedown',\r\n            createEventArgs: args => {\r\n                var e = {};\r\n\r\n                for (var k in args) {\r\n                    if (typeof args[k] == 'string' || typeof args[k] == 'number') {\r\n                        e[k] = args[k];\r\n                    }\r\n                    else if (k == 'target') {\r\n                        var target = {\r\n                            attributes: {\r\n                            }\r\n                        };\r\n        \r\n                        for (let index = 0; index < args.target.attributes.length; index++) {\r\n                            const attr = args.target.attributes[index];\r\n                            target.attributes[attr.name] = attr.value;\r\n                        }\r\n                        e[k] = target;\r\n                    }\r\n                }\r\n\r\n                return e;\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport function isMobile(){\r\n    return /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)\r\n        || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0,4));\r\n}\r\n","﻿//extract from https://github.com/ichord/Caret.js\r\n\r\nclass InputCaret {\r\n    domInputor: any;\r\n\r\n    constructor(inputor) {\r\n        this.domInputor = inputor;\r\n    }\r\n\r\n    getPos = function () {\r\n        return this.domInputor.selectionStart;\r\n    };\r\n\r\n    getPosition = function (pos) {\r\n        var domInputor, end_range, format, html, mirror, start_range;\r\n        domInputor = this.domInputor;\r\n\r\n        format = function (value) {\r\n            value = value.replace(/<|>|`|\"|&/g, '?').replace(/\\r\\n|\\r|\\n/g, \"<br/>\");\r\n            if (/firefox/i.test(navigator.userAgent)) {\r\n                value = value.replace(/\\s/g, '&nbsp;');\r\n            }\r\n            return value;\r\n        };\r\n        if (!pos) {\r\n            pos = this.getPos();\r\n        }\r\n        let inputorValue = domInputor.value;\r\n        start_range = inputorValue.slice(0, pos);\r\n        end_range = inputorValue.slice(pos);\r\n        html = \"<span style='position: relative; display: inline;'>\" + format(start_range) + \"</span>\";\r\n        html += \"<span id='caret' style='position: relative; display: inline;'>|</span>\";\r\n        html += \"<span style='position: relative; display: inline;'>\" + format(end_range) + \"</span>\";\r\n        mirror = new Mirror(domInputor);\r\n        return mirror.create(html).rect();\r\n    };\r\n\r\n    getOffset = function (pos = null) {\r\n        var offset, position, domInputor;\r\n        domInputor = this.domInputor;\r\n\r\n        var rect = domInputor.getBoundingClientRect();\r\n\r\n        offset = {\r\n            left: rect.left,\r\n            top: rect.top\r\n        };\r\n     \r\n        position = this.getPosition(pos);\r\n        return offset = {\r\n            left: offset.left + position.left - domInputor.scrollLeft, \r\n            top: offset.top + position.top - domInputor.scrollTop, \r\n            height: position.height\r\n        };\r\n    };\r\n\r\n}\r\n\r\nclass Mirror {\r\n    domInputor: any;\r\n    css_attr: any;\r\n    constructor(inputor) {\r\n        this.domInputor = inputor;\r\n        this.css_attr = [];\r\n    }\r\n\r\n    create = function (html) {\r\n        this.$mirror = document.createElement(\"div\");\r\n\r\n        (<any>window).AntDesign.interop.css(this.$mirror, this.mirrorCss());\r\n\r\n        this.$mirror.innerHTML = html;\r\n        this.domInputor.parentElement.append(this.$mirror);\r\n\r\n        return this;\r\n    };\r\n\r\n    mirrorCss = function () {\r\n        var css, _this = this;\r\n        css = {\r\n            position: 'absolute',\r\n            left: -9999,\r\n            top: 0,\r\n            zIndex: -20000\r\n        };\r\n\r\n        this.css_attr.push('width');\r\n\r\n        this.css_attr.forEach((p) => {\r\n            return css[p] = _this.domInputor.style[p]//_this.$inputor.css(p);\r\n        })\r\n        \r\n        return css;\r\n    };\r\n\r\n    rect = function () {\r\n        var flag, pos, rect;\r\n        flag = this.$mirror.querySelector(\"#caret\");\r\n        var oRect = flag.getBoundingClientRect();\r\n\r\n        pos = {\r\n            left: flag.offsetLeft,\r\n            top: flag.offsetTop\r\n        }; //$flag.position();\r\n\r\n        rect = {\r\n            left: pos.left,\r\n            top: pos.top,\r\n            height: oRect.height\r\n        };\r\n\r\n        this.$mirror.parentElement.removeChild(this.$mirror)\r\n        return rect;\r\n    };\r\n\r\n}\r\n\r\nfunction getOffset(elem) {\r\n    return (new InputCaret(elem)).getOffset();\r\n}\r\n\r\nexport default getOffset;","﻿\r\nconst throttle = (fn, threshold = 160) => {\r\n    let timeout;\r\n    var start = +new Date;\r\n    return function (...args) {\r\n        let context = this, curTime = +new Date() - 0;\r\n        //总是干掉事件回调\r\n        window.clearTimeout(timeout);\r\n        if (curTime - start >= threshold) {\r\n            //只执行一部分方法，这些方法是在某个时间段内执行一次\r\n            fn.apply(context, args);\r\n            start = curTime;\r\n        }\r\n        else {\r\n            //让方法在脱离事件后也能执行一次\r\n            timeout = window.setTimeout(() => {\r\n                //@ts-ignore\r\n                fn.apply(this, args);\r\n            }, threshold);\r\n        }\r\n    };\r\n}\r\n\r\nconst eventMap = new Map<HTMLElement, Dragger>();\r\n\r\nconst defaultOptions = {\r\n    inViewport: true\r\n}\r\n\r\nclass Dragger {\r\n\r\n    private _triggler: HTMLElement = null;\r\n    private _container: HTMLElement = null;\r\n    private _options: any = null;\r\n    private _state: any = null;\r\n    private _isFirst: boolean = true;\r\n    private _style: string = null;\r\n\r\n    constructor(triggler: HTMLElement, container: HTMLElement, dragInViewport: boolean) {\r\n        this._triggler = triggler;\r\n        this._container = container;\r\n        this._options = Object.assign({}, defaultOptions, {\r\n            inViewport: dragInViewport\r\n        });\r\n        this._state = {\r\n            isInDrag: false,\r\n            mX: 0, // mouse x\r\n            mY: 0, // mouse y\r\n            domStartX: 0, // on mousedown, the mouse x\r\n            domStartY: 0, // on mousedown, the mouse y            \r\n        }\r\n    }\r\n\r\n    getContainerPos() {\r\n        const rect = this._container.getBoundingClientRect();\r\n        return {\r\n            left: rect.left,\r\n            top: rect.top\r\n        }\r\n    }\r\n\r\n    onMousedown = (e) => {\r\n        const state = this._state;\r\n        state.isInDrag = true;\r\n        state.mX = e.clientX;\r\n        state.mY = e.clientY;\r\n        this._container.style.position = \"absolute\";\r\n        const { left, top } = this.getContainerPos();\r\n\r\n        if (this._isFirst) {\r\n\r\n            state.domMaxY = document.documentElement.clientHeight\r\n                - this._container.offsetHeight - 1;\r\n            state.domMaxX = document.documentElement.clientWidth\r\n                - this._container.offsetWidth - 1;\r\n\r\n            this._container.style.left = left + 'px';\r\n            this._container.style.top = top + 'px';\r\n\r\n            if (!this._style) {\r\n                this._style = this._container.getAttribute(\"style\");\r\n            }\r\n\r\n            this._isFirst = false;\r\n        }\r\n\r\n        state.domStartX = left;\r\n        state.domStartY = top;\r\n    }\r\n\r\n    onMouseup = (e) => {\r\n        const state = this._state;\r\n\r\n        state.isInDrag = false;\r\n\r\n        const { left, top } = this.getContainerPos();\r\n        state.domStartX = left;\r\n        state.domStartY = top;\r\n    }\r\n\r\n    onMousemove = throttle((e) => {\r\n        const state = this._state;\r\n        if (state.isInDrag) {\r\n            var nowX = e.clientX,\r\n                nowY = e.clientY,\r\n                disX = nowX - state.mX,\r\n                disY = nowY - state.mY;\r\n\r\n            var newDomX = state.domStartX + disX;\r\n            var newDomY = state.domStartY + disY;\r\n            if (this._options.inViewport) {\r\n                if (newDomX < 0) {\r\n                    newDomX = 0;\r\n                }\r\n                else if (newDomX > state.domMaxX) {\r\n                    newDomX = state.domMaxX;\r\n                }\r\n                if (newDomY < 0) {\r\n                    newDomY = 0;\r\n                }\r\n                else if (newDomY > state.domMaxY) {\r\n                    newDomY = state.domMaxY;\r\n                }\r\n            }\r\n            this._container.style.position = \"absolute\";\r\n            this._container.style.margin = \"0\";\r\n            this._container.style.paddingBottom = \"0\";\r\n            this._container.style.left = newDomX + \"px\";\r\n            this._container.style.top = newDomY + \"px\";\r\n        }\r\n    }, 10).bind(this);\r\n\r\n    onResize = throttle((e) => {\r\n        const state = this._state;\r\n\r\n        state.domMaxY = document.documentElement.clientHeight\r\n            - this._container.offsetHeight - 1;\r\n        state.domMaxX = document.documentElement.clientWidth\r\n            - this._container.offsetWidth - 1;\r\n        state.domStartY = parseInt(this._container.style.top);\r\n        state.domStartX = parseInt(this._container.style.left);\r\n        if (state.domStartY > state.domMaxY) {\r\n            if (state.domMaxY > 0) {\r\n                this._container.style.top = state.domMaxY + \"px\";\r\n            }\r\n        }\r\n        if (state.domStartX > state.domMaxX) {\r\n            this._container.style.left = state.domMaxX + \"px\";\r\n        }\r\n    }, 10).bind(this);\r\n\r\n    bindDrag() {\r\n        const triggler = this._triggler;\r\n        const options = this._options;\r\n\r\n        triggler.addEventListener(\"mousedown\", this.onMousedown, false);\r\n        window.addEventListener(\"mouseup\", this.onMouseup, false);\r\n        document.addEventListener(\"mousemove\", this.onMousemove);\r\n        if (options.inViewport) {\r\n            window.addEventListener(\"resize\", this.onResize, false);\r\n        }\r\n    }\r\n\r\n    unbindDrag() {\r\n        const triggler = this._triggler;\r\n\r\n        triggler.removeEventListener(\"mousedown\", this.onMousedown, false);\r\n        window.removeEventListener(\"mouseup\", this.onMouseup, false);\r\n        document.removeEventListener(\"mousemove\", this.onMousemove);\r\n        if (this._options.inViewport) {\r\n            window.removeEventListener(\"resize\", this.onResize, false);\r\n        }\r\n    }\r\n\r\n    resetContainerStyle() {\r\n        if (this._style !== null) {\r\n            this._isFirst = true;\r\n            this._container.setAttribute(\"style\", this._style);\r\n        }\r\n    }\r\n}\r\n\r\nfunction enableDraggable(triggler: HTMLElement, container: HTMLElement, dragInViewport: boolean = true) {\r\n    let dragger = eventMap.get(triggler);\r\n    if (!dragger) {\r\n        dragger = new Dragger(triggler, container, dragInViewport);\r\n        eventMap.set(triggler, dragger);\r\n    } \r\n    dragger.bindDrag();\r\n}\r\n\r\nfunction disableDraggable(triggler: HTMLElement) {\r\n    const dragger = eventMap.get(triggler);\r\n    if (dragger) {\r\n        dragger.unbindDrag();\r\n    }\r\n}\r\n\r\nfunction resetModalPosition(triggler: HTMLElement) {\r\n    const dragger = eventMap.get(triggler);\r\n    if (dragger) {\r\n        dragger.resetContainerStyle();\r\n    }\r\n}\r\n\r\nexport { enableDraggable, disableDraggable, resetModalPosition };"]}